<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <title>Quantum Alpha PRO v22 | Ultimate Edition</title>
   
   <link rel="stylesheet" href="app.css">
   <style>
       button, .btn, .touch-trigger {
           touch-action: manipulation;
           user-select: none;
           -webkit-tap-highlight-color: transparent;
       }
       /* PequeÃ±a mejora visual para los tooltips en mÃ³viles */
       [title]:active::after {
           content: attr(title);
           position: absolute;
           bottom: 110%;
           left: 50%;
           transform: translateX(-50%);
           background: #1c2128;
           color: #fff;
           padding: 5px 10px;
           border-radius: 4px;
           font-size: 10px;
           z-index: 1000;
           white-space: nowrap;
           border: 1px solid var(--accent);
       }
   </style>
</head>
<body>

<div id="mouse-overlay"></div>

<div class="terminal" id="main-terminal">
    <div class="header-info">
        <span id="speed-meter" title="LATENCIA: Tiempo de respuesta del sensor en milisegundos">MS: 0</span>
        <span id="power-index" title="FUERZA: Ãndice de potencia de la seÃ±al detectada (0.0 a 1.0)">POWER: 0.0</span>
        <span id="noise-index" title="RUIDO: Porcentaje de interferencia en el mercado. Evita operar si es alto">NOISE: 0%</span>
    </div>

    <div class="input-track" id="symbols-track" style="margin-bottom: 5px; border-bottom: none; border-radius: 8px 8px 0 0;" title="HISTORIAL VISUAL: Ãšltimos movimientos registrados por el radar">
        <span style="color: var(--text-dim); font-size: 11px;">ACTIVA EL RADAR PARA INICIAR</span>
    </div>

    <canvas id="flow-chart" title="FLUJO DE DATOS: RepresentaciÃ³n en tiempo real de la secuencia"></canvas>

<div class="selectors-grid" style="display: flex; flex-wrap: nowrap; gap: 2px; justify-content: space-between; overflow-x: auto; padding: 2px;">
    <button class="btn" id="t5" onclick="setTime(5, this)" style="padding: 2px 4px; font-size: 10px;">5S</button>
    <button class="btn" id="t15" onclick="setTime(15, this)" style="padding: 2px 4px; font-size: 10px;">15S</button>
    <button class="btn" id="t30" onclick="setTime(30, this)" style="padding: 2px 4px; font-size: 10px;">30S</button>
    <button class="btn" id="t60" onclick="setTime(60, this)" style="padding: 2px 4px; font-size: 10px;">1M</button>
    
    <button class="btn" id="r1" onclick="setRisk(1, this)" style="padding: 2px 4px; font-size: 10px;">R1</button>
    <button class="btn" id="r2" onclick="setRisk(2, this)" style="padding: 2px 4px; font-size: 10px;">R2</button>
    <button class="btn" id="r3" onclick="setRisk(3, this)" style="padding: 2px 4px; font-size: 10px;">R3</button>

    <button id="neuralBtn" class="btn" style="border-color:#00ff88; color:#00ff88; padding: 2px 4px; font-size: 10px;" onclick="toggleNeuralMode()">NEU</button>
    <button id="flexBtn" class="btn" style="border-color:#8957e5; color:#8957e5; padding: 2px 4px; font-size: 10px;" onclick="toggleFlex()">FLX</button>
    <button id="trendBtn" class="btn" style="border-color:#4a90e2; color:#fff; padding: 2px 4px; font-size: 10px;" onclick="toggleTrendMode()">TRD</button>
    <button id="confluenceBtn" class="btn" style="border-color:#f1c40f; color:#fff; padding: 2px 4px; font-size: 10px;" onclick="toggleConfluence()">CFL</button>
    <button id="adaptiveBtn" class="btn" style="border-color:#e67e22; color:#fff; padding: 2px 4px; font-size: 10px;" onclick="toggleAdaptive()">ADP</button>
</div>

    <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 10px; background: rgba(255,255,255,0.02); padding: 5px; border-radius: 8px;">
        <div id="status-track" style="flex: 1; font-size: 10px; line-height: 1.2; overflow: hidden;">
            <div id="status-message" style="color: var(--text-dim); white-space: nowrap; transition: 0.3s;" title="STATUS: Estado actual de la lectura de datos">WAITING...</div>
            <div id="ia-report" style="display: flex; gap: 8px; align-items: center;">
                <span id="ia-logic" style="color: var(--accent); font-weight: bold;" title="LÃ“GICA: Procesamiento de la Red Neuronal">IA: STANDBY</span>
                <span style="color: var(--border);">|</span>
                <span id="ia-stake" style="font-weight: 800; color: #fff; background: rgba(255,255,255,0.05); padding: 0 4px; border-radius: 3px;" title="SUGERENCIA: Monto o porcentaje recomendado para operar">STK: --</span>
            </div>
        </div>
        <button onclick="undoLastInput(event)" title="DESHACER: Borra el Ãºltimo triÃ¡ngulo (A o B) ingresado" style="background: none; border: 1px solid var(--border); color: #ff2e63; width: 34px; height: 34px; border-radius: 8px; cursor: pointer; font-size: 16px; display: flex; align-items: center; justify-content: center;">â†¶</button>
    </div>

    <div style="display: flex; align-items: stretch; gap: 8px; justify-content: center; flex-wrap: nowrap; margin-bottom: 15px; border: 1px solid var(--border); padding: 10px; border-radius: 12px; background: rgba(255,255,255,0.02);">
        <button id="mouseBtn" class="btn" onclick="toggleMouse()" title="RADAR: Activa el Ã¡rea tÃ¡ctil y el seguimiento de datos" style="flex: 1; margin: 0; min-height: 45px; white-space: nowrap;">INICIAR RADAR</button>
        <button id="autoPilotBtn" class="btn" onclick="toggleAutoPilot()" title="AUTÃ“NOMO: La IA operarÃ¡ automÃ¡ticamente tras 10 registros de historial" style="flex: 1; margin: 0; min-height: 45px; border-color: #ff9f43; color: #ff9f43; white-space: nowrap;">MODO AUTÃ“NOMO</button>
        <div id="ai-log" title="REGISTRO IA: Actividad en tiempo real del motor neuronal" style="font-size: 9px; color: #ff9f43; font-family: 'monospace'; width: 150px; border-left: 2px solid #ff9f43; padding-left: 10px; text-transform: uppercase; line-height: 1.2; display: flex; align-items: center;">IA: STANDBY</div>
    </div>

    <div class="signal-zone" title="ZONA DE SEÃ‘AL: AquÃ­ aparecerÃ¡n las alertas de COMPRA o VENTA">
        <div id="big-icon"></div>
        <div id="op-status">SYSTEM IDLE</div>
        <div id="op-timer" title="RELOJ: Tiempo restante de la seÃ±al">00</div> 
        <div id="op-details">SCANNING DATA FLOW</div>
        <div id="timer-bar"></div>
    </div>

<div class="feedback-grid" id="f-grid">
    <div id="result-step" style="display: flex; gap: 8px; width: 100%;">
        <button id="winBtn" class="feed-btn" onclick="handleWinClick()" style="flex: 2; background: rgba(0, 255, 136, 0.2); border-color: var(--up-neon);">GANASTE? (WIN)</button>
        <button id="lossBtn" class="feed-btn" onclick="recordResult(false, null)" style="flex: 1; background: rgba(255, 46, 99, 0.2); border-color: var(--down-neon);">PERDISTE?</button>
    </div>

    <div id="color-step" style="display: none; flex-direction: column; gap: 5px; width: 100%;">
        <span style="font-size: 9px; color: var(--accent); text-align: center; font-weight: bold;">Â¿COLOR DE LA VELA?</span>
        <div style="display: flex; gap: 5px;">
            <button onclick="recordResult(true, 'A')" class="feed-btn" style="background: var(--up-neon); color: #000; flex: 1;"> â–²</button>
            <button onclick="recordResult(true, 'B')" class="feed-btn" style="background: var(--down-neon); color: #fff; flex: 1;"> â–¼</button>
        </div>
    </div>
</div>

    <div id="manual-touch-zone">
        <div class="touch-trigger t-up" onclick="if(!isSignalActive) registerInput('A')" title="ENTRADA A: Registra un movimiento alcista">â–²</div>
        <div class="touch-trigger t-down" onclick="if(!isSignalActive) registerInput('B')" title="ENTRADA B: Registra un movimiento bajista">â–¼</div>
    </div>

    <div style="display: flex; gap: 6px; align-items: center; padding: 5px;">
        <button onclick="alert(getAdvancedDiagnostics())" title="DIAGNÃ“STICO: Ver datos internos y precisiÃ³n de la IA" style="background:none; border: 1px solid var(--accent); color: var(--accent); font-size: 8px; padding: 2px 4px; border-radius: 3px; cursor: pointer; opacity: 0.6; font-weight: bold;">IA ðŸ§ </button>
        <button onclick="clearFullHistory()" title="REINICIAR: Borra todo el historial y limpia la memoria" style="background: rgba(255, 46, 99, 0.1); color: #ff2e63; border: 1px solid rgba(255, 46, 99, 0.3); font-size: 8px; padding: 3px 7px; border-radius: 4px; cursor: pointer; text-transform: uppercase;">Reiniciar</button>
        <button onclick="exportHistoryToCSV()" style="background: rgba(74, 144, 226, 0.1); color: #4a90e2; border: 1px solid rgba(74, 144, 226, 0.3); font-size: 8px; padding: 3px 7px; border-radius: 4px; cursor: pointer; text-transform: uppercase; font-weight: bold;">
            Exportar Data ðŸ“Š
        </button>
    </div>
</div>

<script src="state.js"></script><script src="engine.js"></script><script src="ui.js"></script><script src="controls.js"></script><script src="ai.js"></script><script src="main.js"></script>
</body>
</html>
